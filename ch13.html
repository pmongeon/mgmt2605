<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Working with data - 13&nbsp; Visualizing geospatial data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./ch12.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./ch10.html">Data visualization</a></li><li class="breadcrumb-item"><a href="./ch13.html"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Visualizing geospatial data</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Working with data</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course overview</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Data fundamentals</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">What is data?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data structures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Types</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Data retrieval, assessment and processing</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Finding and retrieving data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Assessing data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Processing data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Data analytics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Summarizing categorical data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Summarizing numerical data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Measuring the relationship between two variables</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Data visualization</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Principles of data visualization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Visualizing single variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Visualizing multiple variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch13.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Visualizing geospatial data</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#geospatial-data-there-is-a-time-and-a-place-for-everything" id="toc-geospatial-data-there-is-a-time-and-a-place-for-everything" class="nav-link active" data-scroll-target="#geospatial-data-there-is-a-time-and-a-place-for-everything"><span class="header-section-number">13.1</span> Geospatial Data: There is a Time and a Place for Everything</a>
  <ul class="collapse">
  <li><a href="#whats-so-special-about-geospatial-data" id="toc-whats-so-special-about-geospatial-data" class="nav-link" data-scroll-target="#whats-so-special-about-geospatial-data"><span class="header-section-number">13.1.1</span> What’s So Special about Geospatial Data?</a></li>
  <li><a href="#the-power-and-limitations-of-integrated-geospatial-data" id="toc-the-power-and-limitations-of-integrated-geospatial-data" class="nav-link" data-scroll-target="#the-power-and-limitations-of-integrated-geospatial-data"><span class="header-section-number">13.1.2</span> The Power and Limitations of Integrated Geospatial Data</a></li>
  </ul></li>
  <li><a href="#hands-on-exercise-visualize-the-impact-of-fisheries-in-nova-scotia" id="toc-hands-on-exercise-visualize-the-impact-of-fisheries-in-nova-scotia" class="nav-link" data-scroll-target="#hands-on-exercise-visualize-the-impact-of-fisheries-in-nova-scotia"><span class="header-section-number">13.2</span> Hands-on Exercise: Visualize the Impact of Fisheries in Nova Scotia</a>
  <ul class="collapse">
  <li><a href="#get-started-with-arcgis" id="toc-get-started-with-arcgis" class="nav-link" data-scroll-target="#get-started-with-arcgis"><span class="header-section-number">13.2.1</span> Get started with ArcGIS</a></li>
  <li><a href="#access-the-easy-data" id="toc-access-the-easy-data" class="nav-link" data-scroll-target="#access-the-easy-data"><span class="header-section-number">13.2.2</span> Access the easy data</a></li>
  <li><a href="#link-arcgis-to-open-data" id="toc-link-arcgis-to-open-data" class="nav-link" data-scroll-target="#link-arcgis-to-open-data"><span class="header-section-number">13.2.3</span> Link ArcGIS to open data</a></li>
  <li><a href="#find-and-incorporate-income-data" id="toc-find-and-incorporate-income-data" class="nav-link" data-scroll-target="#find-and-incorporate-income-data"><span class="header-section-number">13.2.4</span> Find and incorporate income data</a></li>
  <li><a href="#conclusion-and-credit-exercises" id="toc-conclusion-and-credit-exercises" class="nav-link" data-scroll-target="#conclusion-and-credit-exercises"><span class="header-section-number">13.2.5</span> Conclusion and credit exercises</a></li>
  </ul></li>
  <li><a href="#video-demo" id="toc-video-demo" class="nav-link" data-scroll-target="#video-demo"><span class="header-section-number">13.3</span> Video demo</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">13.4</span> References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./ch10.html">Data visualization</a></li><li class="breadcrumb-item"><a href="./ch13.html"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Visualizing geospatial data</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Visualizing geospatial data</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>This chapter is taken integrally from Chapter 7 of the Snappy Data Management textbook by Colin Conrad. It was copied here simply for ease of access.</p>
</div>
</div>
<section id="geospatial-data-there-is-a-time-and-a-place-for-everything" class="level2" data-number="13.1">
<h2 data-number="13.1" class="anchored" data-anchor-id="geospatial-data-there-is-a-time-and-a-place-for-everything"><span class="header-section-number">13.1</span> Geospatial Data: There is a Time and a Place for Everything</h2>
<p>Data is not just valuable because it supports better decisions; it can also enable new types of experiences. In 2016, the Niantic corporation released Pokémon Go, an augmented reality (AR) mobile game that uses global positioning systems (GPS) to locate, capture and battle virtual creatures from the popular Pokémon franchise <span class="citation" data-cites="noauthor_pokemon_nodate">(<a href="#ref-noauthor_pokemon_nodate" role="doc-biblioref"><span>“Pokémon <span>GO</span>”</span> n.d.</a>)</span>. The game took the world by storm, having been downloaded more than 800 million times by 2018, and it continues to have a dedicated fan base to this day <span class="citation" data-cites="chamary_why_nodate">(<a href="#ref-chamary_why_nodate" role="doc-biblioref">Chamary n.d.</a>)</span>. While Niantic’s previous location-based mobile games, such as Ingress, managed to gather a small following, no other application had then gathered such widespread appeal. The success of Pokémon Go was a factor that inspired new interest in augmented and virtual reality devices, such as the development of Oculus Rift and Apple Vision Pro.</p>
<p>This success demonstrated something deeper than new market opportunities, however. At its height, the game shifted human mobility and identified limitations in the design of whole cities <span class="citation" data-cites="colley_geography_2017">(<a href="#ref-colley_geography_2017" role="doc-biblioref">Colley et al. 2017</a>)</span>. The geospatial data generated by Niantic’s games can be used to improve transportation methods and have informed new approaches to pedestrian design. However, the data are also used to inform how long people are physically located in specific places, which can be complemented with your other advertising identifiers to conduct location-targeted advertising or promotion events <span class="citation" data-cites="noauthor_niantic_nodate">(<a href="#ref-noauthor_niantic_nodate" role="doc-biblioref"><span>“Niantic <span>Privacy</span> <span>Policy</span>”</span> n.d.</a>)</span>. Niantic is not the first company to integrate geospatial and social data, though they were among the first to do this at scale by using a highly interactive and innovative AR experience.</p>
<p>Geospatial data such as that generated by GPS can be used to tell stories about our lives that other types of data cannot. It needs special consideration in our wider conversation about data, its uses, its visualization, and its management. In this chapter, we will discuss some of the unique features of geospatial data and why it matters.</p>
<section id="whats-so-special-about-geospatial-data" class="level3" data-number="13.1.1">
<h3 data-number="13.1.1" class="anchored" data-anchor-id="whats-so-special-about-geospatial-data"><span class="header-section-number">13.1.1</span> What’s So Special about Geospatial Data?</h3>
<p>Geospatial data is not that different from other types of data, other than the fact that it is usually anchored to a specific point in space. When geospatial data is organized properly, it usually contains at least two dimensions:</p>
<ul>
<li><p>Horizontal data, which determines where on the Earth’s surface something is (x, y).</p></li>
<li><p>Vertical data, which determines an elevation (z).</p></li>
</ul>
<p>Combinations of these values can be used to determine where in the world something is. Data can be linked to coordinates to provide unique insights about space.</p>
<p>Most of the time, geospatial data is best visualized using a map, either as a set of physical pictures or a digital space. As mentioned in Chapter 6, human brains are not well-suited to reading raw data and it is usually better to visualize data so that it can be interpreted. In the case of geospatial data, a tool like a map is usually better suited to our way of conceptualizing the data. The theory of cognitive fit has been used to explain why some types of information technology tools work better for our brains than others <span class="citation" data-cites="vessey_cognitive_1991">(<a href="#ref-vessey_cognitive_1991" role="doc-biblioref">Vessey and Galletta 1991</a>)</span>. Some visualizations better “fit” our cognitive models for the data than others. In the case of geospatial data, a map better fits our conception than (say) a bar chart. This explains why geographic information systems (GIS) are the preferred tool for working with this type of data <span class="citation" data-cites="dennis_using_1998">(<a href="#ref-dennis_using_1998" role="doc-biblioref">Dennis and Carte 1998</a>)</span>.</p>
<p>Most GIS software organizes data in 2D or 3D space often based on coordinates provided in the data (x, y, z). Data is generated either from the air or the ground using these coordinates as anchors. GIS then usually helps users make sense of the world using layers—collections of different varieties of data anchored to those coordinate points. By stacking layers, a user can develop insights about a space that they would otherwise not have been able to. For example, by observing layers related to traffic patterns and bus stop locations, an entrepreneur might be able to find a great location to locate a Starbucks.</p>
</section>
<section id="the-power-and-limitations-of-integrated-geospatial-data" class="level3" data-number="13.1.2">
<h3 data-number="13.1.2" class="anchored" data-anchor-id="the-power-and-limitations-of-integrated-geospatial-data"><span class="header-section-number">13.1.2</span> The Power and Limitations of Integrated Geospatial Data</h3>
<p>The information generated from geospatial data is particularly powerful when it is integrated with other human information, such as that derived from social and psychographic (ie., activities, interests, and opinions) data. Marketing tools such as Environics PRIZM provide insights about customer segments, derived from demographics, consumer behaviour, and geographic data <span class="citation" data-cites="noauthor_prizm_nodate">(<a href="#ref-noauthor_prizm_nodate" role="doc-biblioref"><span>“<span>PRIZM</span> <span>Premier</span> <span></span> <span>Environics</span> <span>Analytics</span>”</span> n.d.</a>)</span>. PRIZM segments the Canadian postal codes into 67 lifestyle profiles, and marketers can use this information to provide location-informed marketing campaigns. This is particularly useful for retailers who provide in-person goods or services. Similar geospatially focused marketing data can be further used to perform targeted marketing, reducing the costs to acquire a customer. Governments might also use geospatial information to make decisions about where to locate services, such as schools or hospitals.</p>
<p>The use of geospatial information has not been without criticism. Maps and geospatial information have been used to justify actions by those in power, often to the disadvantage of those who did not have input into the information. The subfield of critical cartography has thus been formed to challenge the ways that maps have been used to justify biased decisions <span class="citation" data-cites="crampton_introduction_2005">(<a href="#ref-crampton_introduction_2005" role="doc-biblioref">Crampton and Krygier 2005</a>)</span>. For example, while Google Maps remains a very popular GIS, the decision to feature location markers selected by Google is often decided based on their commercial or political value <span class="citation" data-cites="mcquire_one_2019">(<a href="#ref-mcquire_one_2019" role="doc-biblioref">McQuire 2019</a>)</span>. Furthermore, Google’s choice to employ the Mercator projection (until recently) disproportionally emphasizes spaces of countries near the poles versus near the equator. This limits the ability of non-commercial groups and disenfranchised interests to gain visibility on the platform and may disproportionately emphasize the importance of northern countries. Figure 7.1 demonstrates the Mercator projection, which overemphasizes Canada, Russia, and Greenland, and underemphasizes the size of Africa and South America <span class="citation" data-cites="strebe_english_2011">(<a href="#ref-strebe_english_2011" role="doc-biblioref">Strebe 2011</a>)</span>.</p>
<p><img src="images/clipboard-2955975611.png" class="img-fluid"></p>
<p>Figure 7.1 - A Mercator projection of the world</p>
<p>By observing the dynamics of geospatial data, we can better understand the world we live in. In this sense, geospatial data holds unique value and plays a special role in our lives.</p>
</section>
</section>
<section id="hands-on-exercise-visualize-the-impact-of-fisheries-in-nova-scotia" class="level2" data-number="13.2">
<h2 data-number="13.2" class="anchored" data-anchor-id="hands-on-exercise-visualize-the-impact-of-fisheries-in-nova-scotia"><span class="header-section-number">13.2</span> Hands-on Exercise: Visualize the Impact of Fisheries in Nova Scotia</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Video demo available
</div>
</div>
<div class="callout-body-container callout-body">
<p>I highly recommend that you watch the video demo at the end of this chapter, especially if you have a hard time navigating the instructions below.</p>
</div>
</div>
<p>In this exercise, we will extend our foundation in visual analytics and explore the lobster industry, an important economic driver of Nova Scotia. In 2018, Canada exported more than 12 million pounds of lobster, representing a market value of more than $223 million <span class="citation" data-cites="whittle_canadian_2019">(<a href="#ref-whittle_canadian_2019" role="doc-biblioref">Whittle 2019</a>)</span>. However, it’s one thing to understand figures and quite another to understand how it impacts the lives of specific communities. Fortunately, GIS is here to help.</p>
<p>Esri is one of the world’s leading GIS companies. Its flagship ArcGIS product is used for making maps, analyzing map information, and easily navigating map systems. If an organization wanted to understand the impact of the lobster industry on rural regions in Atlantic Canada, GIS could offer many solutions. I will assume that you are using ArcGIS to generate information related to the lobster fishery and understand whether this industry has an impact on rural Atlantic Canadians. By doing this, we can observe not just the potential of GIS, but also the functionality of an analytics web application supported by a REST API, similar to what we explored in Chapter 3.</p>
<section id="get-started-with-arcgis" class="level3" data-number="13.2.1">
<h3 data-number="13.2.1" class="anchored" data-anchor-id="get-started-with-arcgis"><span class="header-section-number">13.2.1</span> Get started with ArcGIS</h3>
<p>Before we can dig into the problem, we first need to familiarize ourselves with ArcGIS. Visit the <a href="https://www.esri.com/en-us/arcgis/products/create-account">ArcGIS Online website</a> and create a free account using an email address.</p>
<p>ArcGIS is a powerful proprietary web-based tool that is commonly used in industry. Fortunately, it also has a public version, which will give users limited functionality for free. Create a new account and refer to Figure 7.2 for more details.</p>
</section>
<section id="access-the-easy-data" class="level3" data-number="13.2.2">
<h3 data-number="13.2.2" class="anchored" data-anchor-id="access-the-easy-data"><span class="header-section-number">13.2.2</span> Access the easy data</h3>
<p>We should start by making a map. Once logged in to ArcGIS Online, click “Map” from the top menu bar to reveal a map with the base topographic layer. The concept of a layer is important in GIS. Layers are the way that information is added to ArcGIS maps and are derived either from a local or external data set. Layers add information similarly to the way that artists add information to a painting; more layers are not necessarily better, but layers are often needed to capture the complexity of the story. Esri provides good resources for learning more about layers <span class="citation" data-cites="noauthor_what_nodate">(<a href="#ref-noauthor_what_nodate" role="doc-biblioref"><span>“What Is a Layer?—<span>Help</span> <span></span> <span>ArcGIS</span> for <span>Desktop</span>”</span> n.d.</a>)</span>.</p>
<p>We can add layers using the “Add” icon on ArcGIS Online’s top menu. You can add layers by uploading files, using web application programming interface (API) links, or by searching for files contained in Esri’s public databases. Start by searching the term “lobster” and see what happens. Be sure to specify “ArcGIS Online” as your search option using the submenu above the search bar. You will find that there is remarkably little data provided by Canadian organizations, but a few from the USA.</p>
<p>Look for the MaineDMR Lobster Pounds – 2019 dataset. Add this to your map and see where the lobster pounds are populated. This will instantly populate your map with the locations of lobster pounds from the State of Maine, demonstrating how easy it is to layer data in a GIS.</p>
<p><img src="images/clipboard-3797770256.png" class="img-fluid"></p>
<p>Figure 7.2 - Create a public account and follow the steps explained in your email</p>
</section>
<section id="link-arcgis-to-open-data" class="level3" data-number="13.2.3">
<h3 data-number="13.2.3" class="anchored" data-anchor-id="link-arcgis-to-open-data"><span class="header-section-number">13.2.3</span> Link ArcGIS to open data</h3>
<p>ArcGIS also makes good use of REST APIs to make it easy to visualize data. The Canadian government may not make its government accessible through the Esri search service, but it does provide considerable open map data in an API through its website: <a href="https://open.canada.ca/en/open-data" class="uri">https://open.canada.ca/en/open-data</a>.</p>
<p>As we saw in Chapter 4, you can visit the Government of Canada’s open data website and search for data that might be useful to you. For instance, if we search “lobster”, we should be presented somewhere with “Maritimes Region Fisheries Atlas: Catch Weight Landings Mapping (2014-2018)”. Click on this link. Near the bottom of this page, you should find “Data and Resources” which allows you to access data in ESRI REST format. Click on the link to be brought to the server’s web page. Copy the URL and then return to ArcGIS.</p>
<p>Back in ArcGIS, click the “add” icon again, this time adding a layer from a URL. When asked for a URL, paste the link that you just copied from the Government of Canada Portal. This will copy a large number of layers under “Marine Fisheries Atlas 2014 2018”. If you expand this layer you will find several sublayers. By selecting these sublayers, you will demonstrate the location of the catch of the various fish, such as Cod shown in Figure 7.3.</p>
<p><img src="images/clipboard-3617071063.png" class="img-fluid"></p>
<p>Figure 7.3 – Cod catch locations</p>
</section>
<section id="find-and-incorporate-income-data" class="level3" data-number="13.2.4">
<h3 data-number="13.2.4" class="anchored" data-anchor-id="find-and-incorporate-income-data"><span class="header-section-number">13.2.4</span> Find and incorporate income data</h3>
<p>The real power of ArcGIS is not in visualizing one dataset, but in combining them. Let’s now combine both regional income and lobster data. Using the Canada Open Data Portal, retrieve the ESRI REST link for a data set called “Median after-tax income for households in 2015 (dollars) by census division, 2016 Census”. You might have to refine your search to ESRI REST format types using the search bar to the left of the search results. Add the data via URL as a new layer. Consider selecting only the Offshore Lobster and Disputed Zone Lobster You should have a similar visualization as provided in Figure 7.4. Do you think there is a story to be told with these images?</p>
<p><img src="images/clipboard-2036223450.png" class="img-fluid"></p>
<p>Figure 7.4 - Median household income and offshore lobster, visualized</p>
</section>
<section id="conclusion-and-credit-exercises" class="level3" data-number="13.2.5">
<h3 data-number="13.2.5" class="anchored" data-anchor-id="conclusion-and-credit-exercises"><span class="header-section-number">13.2.5</span> Conclusion and credit exercises</h3>
<p>This brings us to the end of this exercise. To recap, by completing this exercise, you will have used ArcGIS Online to visualize both income and fisheries data to tell a story. In doing so, you put your knowledge about REST APIs to work in the context of a leading analytics tool. I welcome and encourage you to play around with ArcGIS to create interesting visualizations.</p>
<p>If you are completing this exercise as part of a course, please see your learning management system for the graded exercise questions.</p>
</section>
</section>
<section id="video-demo" class="level2" data-number="13.3">
<h2 data-number="13.3" class="anchored" data-anchor-id="video-demo"><span class="header-section-number">13.3</span> Video demo</h2>
<iframe src="https://dal.hosted.panopto.com/Panopto/Pages/Embed.aspx?id=ba42f365-b0f7-41ac-8758-b238016dae9b&amp;autoplay=false&amp;offerviewer=true&amp;showtitle=true&amp;showbrand=true&amp;captions=true&amp;interactivity=all" height="405" width="720" style="border: 1px solid #464646;" allowfullscreen="" allow="autoplay" aria-label="Panopto Embedded Video Player" aria-description="Saturday, November 30, 2024 at 2:33:07 PM">
</iframe>
</section>
<section id="references" class="level2" data-number="13.4">
<h2 data-number="13.4" class="anchored" data-anchor-id="references"><span class="header-section-number">13.4</span> References</h2>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-chamary_why_nodate" class="csl-entry" role="listitem">
Chamary, J. V. n.d. <span>“Why ’<span>Pokémon</span> <span>GO</span>’ <span>Is</span> <span>The</span> <span>World</span>’s <span>Most</span> <span>Important</span> <span>Game</span>.”</span> <em>Forbes</em>. Accessed November 26, 2024. <a href="https://www.forbes.com/sites/jvchamary/2018/02/10/pokemon-go-science-health-benefits/">https://www.forbes.com/sites/jvchamary/2018/02/10/pokemon-go-science-health-benefits/</a>.
</div>
<div id="ref-colley_geography_2017" class="csl-entry" role="listitem">
Colley, Ashley, Jacob Thebault-Spieker, Allen Yilun Lin, Donald Degraen, Benjamin Fischman, Jonna Häkkilä, Kate Kuehl, et al. 2017. <span>“The <span>Geography</span> of <span>Pokémon</span> <span>GO</span>: <span>Beneficial</span> and <span>Problematic</span> <span>Effects</span> on <span>Places</span> and <span>Movement</span>.”</span> In <em>Proceedings of the 2017 <span>CHI</span> <span>Conference</span> on <span>Human</span> <span>Factors</span> in <span>Computing</span> <span>Systems</span></em>, 1179–92. Denver Colorado USA: ACM. <a href="https://doi.org/10.1145/3025453.3025495">https://doi.org/10.1145/3025453.3025495</a>.
</div>
<div id="ref-crampton_introduction_2005" class="csl-entry" role="listitem">
Crampton, Jeremy W., and John Krygier. 2005. <span>“An <span>Introduction</span> to <span>Critical</span> <span>Cartography</span>.”</span> <em>ACME: An International Journal for Critical Geographies</em> 4 (1): 11–33. <a href="https://doi.org/10.14288/acme.v4i1.723">https://doi.org/10.14288/acme.v4i1.723</a>.
</div>
<div id="ref-dennis_using_1998" class="csl-entry" role="listitem">
Dennis, Alan R., and Traci A. Carte. 1998. <span>“Using <span>Geographical</span> <span>Information</span> <span>Systems</span> for <span>Decision</span> <span>Making</span>: <span>Extending</span> <span>Cognitive</span> <span>Fit</span> <span>Theory</span> to <span>Map</span>-<span>Based</span> <span>Presentations</span>.”</span> <em>Information Systems Research</em> 9 (2): 194–203. <a href="https://doi.org/10.1287/isre.9.2.194">https://doi.org/10.1287/isre.9.2.194</a>.
</div>
<div id="ref-mcquire_one_2019" class="csl-entry" role="listitem">
McQuire, Scott. 2019. <span>“One Map to Rule Them All? <span>Google</span> <span>Maps</span> as Digital Technical Object.”</span> <em>Communication and the Public</em> 4 (2): 150–65. <a href="https://doi.org/10.1177/2057047319850192">https://doi.org/10.1177/2057047319850192</a>.
</div>
<div id="ref-noauthor_niantic_nodate" class="csl-entry" role="listitem">
<span>“Niantic <span>Privacy</span> <span>Policy</span>.”</span> n.d. Accessed November 26, 2024. <a href="https://nianticlabs.com/privacy/">https://nianticlabs.com/privacy/</a>.
</div>
<div id="ref-noauthor_pokemon_nodate" class="csl-entry" role="listitem">
<span>“Pokémon <span>GO</span>.”</span> n.d. <em>Pokémon GO</em>. Accessed November 26, 2024. <a href="https://pokemongolive.com/">https://pokemongolive.com/</a>.
</div>
<div id="ref-noauthor_prizm_nodate" class="csl-entry" role="listitem">
<span>“<span>PRIZM</span> <span>Premier</span> <span></span> <span>Environics</span> <span>Analytics</span>.”</span> n.d. Accessed November 26, 2024. <a href="https://environicsanalytics.com/data/segmentation/prizm-premier-consumer-segmentation">https://environicsanalytics.com/data/segmentation/prizm-premier-consumer-segmentation</a>.
</div>
<div id="ref-strebe_english_2011" class="csl-entry" role="listitem">
Strebe. 2011. <span>“English: <span>The</span> World on <span>Mercator</span> Projection Between 85°3’4"<span>S</span> and 85°3’4"<span>N</span>, Such That Image Is Square. 15° Graticule. <span>Imagery</span> Is a Derivative of <span>NASA</span>’s <span>Blue</span> <span>Marble</span> Summer Month Composite with Oceans Lightened to Enhance Legibility and Contrast. <span>Image</span> Created with the <span>Geocart</span> Map Projection Software.”</span> <a href="https://commons.wikimedia.org/wiki/File:Mercator_projection_Square.JPG">https://commons.wikimedia.org/wiki/File:Mercator_projection_Square.JPG</a>.
</div>
<div id="ref-vessey_cognitive_1991" class="csl-entry" role="listitem">
Vessey, Iris, and Dennis Galletta. 1991. <span>“Cognitive <span>Fit</span>: <span>An</span> <span>Empirical</span> <span>Study</span> of <span>Information</span> <span>Acquisition</span>.”</span> <em>Information Systems Research</em> 2 (1): 63–84. <a href="https://doi.org/10.1287/isre.2.1.63">https://doi.org/10.1287/isre.2.1.63</a>.
</div>
<div id="ref-noauthor_what_nodate" class="csl-entry" role="listitem">
<span>“What Is a Layer?—<span>Help</span> <span></span> <span>ArcGIS</span> for <span>Desktop</span>.”</span> n.d. Accessed November 26, 2024. <a href="https://desktop.arcgis.com/en/arcmap/10.3/map/working-with-layers/what-is-a-layer-.htm">https://desktop.arcgis.com/en/arcmap/10.3/map/working-with-layers/what-is-a-layer-.htm</a>.
</div>
<div id="ref-whittle_canadian_2019" class="csl-entry" role="listitem">
Whittle, Patrick. 2019. <span>“Canadian Lobster Exports Boom Amid <span>U</span>.<span>S</span>. Trade Tensions with <span>China</span>.”</span> <em>CBC News</em>, August. <a href="https://www.cbc.ca/news/canada/nova-scotia/u-s-exports-to-lobster-loving-china-go-off-cliff-amid-tariffs-1.5259453">https://www.cbc.ca/news/canada/nova-scotia/u-s-exports-to-lobster-loving-china-go-off-cliff-amid-tariffs-1.5259453</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./ch12.html" class="pagination-link" aria-label="Visualizing multiple variables">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Visualizing multiple variables</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>